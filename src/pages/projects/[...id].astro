---
import { getCollection, render } from 'astro:content';
import type { GetStaticPaths } from 'astro';
import BaseHead from '../../components/BaseHead.astro';
import Footer from '../../components/Footer.astro';
import Header from '../../components/Header.astro';

export const getStaticPaths = (async () => {
	const projects = await getCollection('projects');
	return projects.map((project) => ({
		params: { id: project.id },
		props: project,
	}));
}) satisfies GetStaticPaths;

const project = Astro.props;
const { Content } = await render(project);
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={project.data.title} description={project.data.description} />
	</head>
	<body class="bg-gray-50">
		<Header />
		<main class="max-w-3xl mx-auto px-4 py-12">
			<article class="bg-white rounded-lg shadow-md p-8">
				{project.data.featured && (
					<span class="inline-block px-3 py-1 text-xs font-semibold text-blue-600 bg-blue-100 rounded-full mb-4">
						Featured Project
					</span>
				)}

				<h1 class="text-4xl font-bold text-gray-900 mb-4">{project.data.title}</h1>
				<p class="text-xl text-gray-600 mb-6">{project.data.description}</p>

				<div class="flex flex-wrap gap-2 mb-8">
					{project.data.technologies.map((tech: string) => (
						<span class="px-3 py-1 text-sm bg-blue-50 text-blue-700 rounded-md font-medium">
							{tech}
						</span>
					))}
				</div>

				{(project.data.github || project.data.demo) && (
					<div class="flex gap-4 mb-8 pb-8 border-b">
						{project.data.github && (
							<a
								href={project.data.github}
								class="inline-flex items-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors"
							>
								GitHub Repository →
							</a>
						)}
						{project.data.demo && (
							<a
								href={project.data.demo}
								class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
							>
								Live Demo →
							</a>
						)}
					</div>
				)}

				<div class="prose prose-lg max-w-none">
					<Content />
				</div>
			</article>

			<div class="mt-8">
				<a href="/projects" class="text-blue-600 hover:text-blue-800 font-medium">
					← Back to Projects
				</a>
			</div>
		</main>
		<Footer />
	</body>
</html>
